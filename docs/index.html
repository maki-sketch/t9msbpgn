<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T9MSBPGN</title>
    <link rel="stylesheet" href="index-style.css">
</head>
<body>

    <header>
        <div class="container">
            <h1 onclick="showList()">天津市第九中学</h1>
            <p>这不是官方网站</p>
        </div>
    </header>

    <main class="container">
        <!-- 文章列表区域 -->
        <div id="post-list" class="post-list">
            <!-- JavaScript 会在这里自动填充文章 -->
        </div>

        <!-- 文章内容显示区域 (默认隐藏) -->
        <div id="post-viewer" class="post-viewer hidden">
            <button onclick="showList()" class="back-btn">← 返回列表</button>
            <h1 id="viewer-title"></h1>
            <div class="meta-info">发布于: <span id="viewer-date"></span></div>
            <hr>
            <div id="viewer-content"></div>
        </div>
    </main>

    <script>
        // 1. 页面加载时获取文章列表
        fetch('posts.json')
            .then(response => response.json())
            .then(data => renderList(data))
            .catch(error => console.error('无法读取文章列表:', error));

        // 渲染列表函数
        function renderList(posts) {
            const listContainer = document.getElementById('post-list');
            listContainer.innerHTML = '';

            posts.forEach(post => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <h2>${post.title}</h2>
                    <p class="date">${post.date}</p>
                    <p>${post.summary}</p>
                `;
                // 点击卡片加载文章
                card.onclick = () => loadPost(post);
                listContainer.appendChild(card);
            });
        }

        // 加载单篇文章内容
        function loadPost(post) {
            fetch(post.file)
                .then(response => response.text())
                .then(html => {
                    document.getElementById('post-list').classList.add('hidden');
                    document.getElementById('post-viewer').classList.remove('hidden');
                    
                    document.getElementById('viewer-title').innerText = post.title;
                    document.getElementById('viewer-date').innerText = post.date;
                    
                    // 核心：将HTML文件的内容注入到页面中
                    document.getElementById('viewer-content').innerHTML = html;
                });
        }

        // 返回列表
        function showList() {
            document.getElementById('post-viewer').classList.add('hidden');
            document.getElementById('post-list').classList.remove('hidden');
        }
    </script>
  <footer>&copy; 2026 T9MSBPGN. Released under the 
    <a href="https://github.com/maki-sketch/t9msbpgn/blob/main/LICENSE">MIT License</a>. | Powered by Cloudflare Pages™</footer>
</body></html>
